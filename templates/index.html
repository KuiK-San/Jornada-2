<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tela de Kanban</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
    <div class="p-2" style="background: linear-gradient(180deg, rgba(7, 3, 27, 0.00) 0%, #07031B 72.4%), #15144E; ">
    
        <div class="container">
            <div class="row" style="height: 334.4px;">
                <div class="col-3 border border-white border-top-0" id="corte" style="background: linear-gradient(180deg, rgba(0, 0, 0, 0.00) 43.23%, #07031B 85.42%); ">
                    <h4 class="text-white text-center pb-2 border-white border-bottom">Corte</h4>
                </div>
                <div class="col-3 border border-white border-top-0" id="limpeza" style="background: linear-gradient(180deg, rgba(0, 0, 0, 0.00) 43.23%, #07031B 85.42%); ">
                    <h4 class="text-white text-center pb-2 border-white border-bottom">Limpeza</h4>
                </div>
                <div class="col-3 border border-white border-top-0" id="moldagem" style="background: linear-gradient(180deg, rgba(0, 0, 0, 0.00) 43.23%, #07031B 85.42%); ">
                    <h4 class="text-white text-center pb-2 border-white border-bottom">Moldagem</h4>
                </div>
                <div class="col-3 border border-white border-top-0" id="solda" style="background: linear-gradient(180deg, rgba(0, 0, 0, 0.00) 43.23%, #07031B 85.42%); ">
                    <h4 class="text-white text-center pb-2 border-white border-bottom">Solda</h4>
                </div>
            </div>
            <div class="row" style="height: 334.4px;">
                <div class="col-3" id="descascar">
                    <h4>Descascar</h4>
                </div>
                <div class="col-3" id="interno">
                    <h4>Lixamento Interno</h4>
                </div>
                <div class="col-3" id="polInterno">
                    <h4>Polimento Interno</h4>
                </div>
                <div class="col-3" id="externo">
                    <h4>Lixamento Externo</h4>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script>
        const socket = io.connect('http://' + document.domain + ':' + location.port);
        let i = 0
        const processos = ['corte', 'limpeza', 'moldagem', 'solda', 'descascar', 'interno', 'polInterno', 'externo']
        socket.on('atualizacao', (message) => {
            let atual = document.querySelector(`#${processos[i]}`)
            if(i!=0){document.querySelector(`#${processos[i-1]}`).innerHTML = `<h4>${processos[i-1]}</h4>`}

            var novoCard = document.createElement("div");
            novoCard.className = "card";
            novoCard.style.width = "18rem";

            var cardBody = document.createElement("div");
            cardBody.className = "card-body";

            var cardTitle = document.createElement("h5");
            cardTitle.className = "card-title";
            cardTitle.textContent = "Card title";

            var cardSubtitle = document.createElement("h6");
            cardSubtitle.className = "card-subtitle mb-2 text-body-secondary";
            cardSubtitle.textContent = "Card subtitle";

            var cardText = document.createElement("p");
            cardText.className = "card-text";
            cardText.textContent = "Some quick example text to build on the card title and make up the bulk of the card's content.";

            var cardLink1 = document.createElement("a");
            cardLink1.className = "card-link";
            cardLink1.href = "#";
            cardLink1.textContent = "Card link";

            var cardLink2 = document.createElement("a");
            cardLink2.className = "card-link";
            cardLink2.href = "#";
            cardLink2.textContent = "Another link";

            // Passo 4: Montar a estrutura do card
            cardBody.appendChild(cardTitle);
            cardBody.appendChild(cardSubtitle);
            cardBody.appendChild(cardText);
            cardBody.appendChild(cardLink1);
            cardBody.appendChild(cardLink2);

            novoCard.appendChild(cardBody);

            atual.appendChild(novoCard)
            
            i++

            if(i > processos.length){
                i = 0
            }

        })
    </script>
</body>
</html>